#!/bin/sh
if [ -z "$ptxdist" ]; then
	# when called as ptxdist, don't recurse into ~/bin/ptxdist
	self="$(readlink -f "$0")"
	OLDIFS="$IFS"
	IFS=":"
	for path in $PATH; do
		ptxdist="$(readlink -f "${path}/ptxdist")"
		if [ -x "$ptxdist" -a "$(readlink -f "$ptxdist")" != "$self" ]; then
			break
		fi
	done
	IFS="$OLDIFS"
fi
if [ -z "$ptxdist" ]; then
	echo "no ptxdist found in $PATH"
fi

if tty -s; then
	tput setaf 3 >&2  # yellow
	echo + exec $ptxdist_nice $ptxdist $ptxdist_dev_params "$@" >&2
	tput sgr 0 >&2    # back to normal
fi
exec $ptxdist_nice $ptxdist $ptxdist_dev_params "$@"
